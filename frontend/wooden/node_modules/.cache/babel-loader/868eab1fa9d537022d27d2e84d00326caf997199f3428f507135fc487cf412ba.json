{"ast":null,"code":"import { createAsyncThunk, createSlice } from '@reduxjs/toolkit';\nimport { LoginAPI } from '../api/user/userAPI';\nimport { getCookie, setCookie, removeCookie } from '../util/cookieUtil';\nexport const loginPostAsync = createAsyncThunk('loginPostAsync', async (param, {\n  rejectWithValue\n}) => {\n  try {\n    const response = await LoginAPI(param);\n    return response;\n  } catch (error) {\n    console.error(\"로그인 요청 실패:\", error);\n    return rejectWithValue({\n      success: false,\n      message: '로그인 실패. 서버를 확인하세요.'\n    });\n  }\n});\nconst memberCookie = getCookie(\"member\") || null;\nconst loginSlice = createSlice({\n  name: 'login',\n  initialState: {\n    isLogin: (memberCookie === null || memberCookie === void 0 ? void 0 : memberCookie.isLogin) || false,\n    user: (memberCookie === null || memberCookie === void 0 ? void 0 : memberCookie.user) || null,\n    message: '',\n    loading: false\n  },\n  reducers: {\n    logout: state => {\n      state.isLogin = false;\n      state.user = null;\n      removeCookie(\"member\");\n    }\n  },\n  extraReducers: builder => {\n    builder.addCase(loginPostAsync.pending, state => {\n      state.loading = true;\n      state.message = '';\n    }).addCase(loginPostAsync.fulfilled, (state, action) => {\n      const data = action.payload;\n      if (data.success) {\n        state.isLogin = true;\n        state.user = data.name || null;\n        state.message = data.message;\n        setCookie(\"member\", {\n          user: data.name,\n          isLogin: true\n        }, 1);\n      } else {\n        state.isLogin = false;\n        state.user = null;\n        state.message = data.message;\n        removeCookie(\"member\");\n      }\n    }).addCase(loginPostAsync.rejected, (state, action) => {\n      var _action$payload;\n      state.loading = false;\n      state.isLogin = false;\n      state.user = null;\n      state.message = ((_action$payload = action.payload) === null || _action$payload === void 0 ? void 0 : _action$payload.message) || \"서버 오류\";\n    });\n  }\n});\nexport const {\n  logout\n} = loginSlice.actions;\nexport default loginSlice.reducer;","map":{"version":3,"names":["createAsyncThunk","createSlice","LoginAPI","getCookie","setCookie","removeCookie","loginPostAsync","param","rejectWithValue","response","error","console","success","message","memberCookie","loginSlice","name","initialState","isLogin","user","loading","reducers","logout","state","extraReducers","builder","addCase","pending","fulfilled","action","data","payload","rejected","_action$payload","actions","reducer"],"sources":["C:/frontwooden/wooden/src/slice/loginSlice.jsx"],"sourcesContent":["import { createAsyncThunk, createSlice } from '@reduxjs/toolkit';\r\nimport { LoginAPI } from '../api/user/userAPI';\r\nimport { getCookie, setCookie, removeCookie } from '../util/cookieUtil';\r\n\r\nexport const loginPostAsync = createAsyncThunk(\r\n'loginPostAsync',\r\nasync (param, { rejectWithValue }) => {\r\ntry {\r\n    const response = await LoginAPI(param);\r\n    return response;\r\n} catch (error) {\r\n    console.error(\"로그인 요청 실패:\", error);\r\n    return rejectWithValue({ success: false, message: '로그인 실패. 서버를 확인하세요.' });\r\n}\r\n}\r\n);\r\n\r\n\r\nconst memberCookie = getCookie(\"member\") || null;\r\n\r\nconst loginSlice = createSlice({\r\nname: 'login',\r\ninitialState: {\r\nisLogin: memberCookie?.isLogin || false,\r\nuser: memberCookie?.user || null,\r\nmessage: '',\r\nloading: false,\r\n},\r\nreducers: {\r\nlogout: (state) => {\r\n    state.isLogin = false;\r\n    state.user = null;\r\n    removeCookie(\"member\");\r\n},\r\n},\r\nextraReducers: (builder) => {\r\nbuilder\r\n    .addCase(loginPostAsync.pending, (state) => {\r\n    state.loading = true;\r\n    state.message = '';\r\n    })\r\n    .addCase(loginPostAsync.fulfilled, (state, action) => {\r\n    const data = action.payload;\r\n\r\n    if (data.success) {\r\n        state.isLogin = true;\r\n        state.user = data.name || null;\r\n        state.message = data.message;\r\n\r\n        \r\n        setCookie(\"member\", {\r\n        user: data.name,\r\n        isLogin: true\r\n        }, 1);\r\n\r\n    } else {\r\n        state.isLogin = false;\r\n        state.user = null;\r\n        state.message = data.message;\r\n        removeCookie(\"member\");\r\n    }\r\n    })\r\n    .addCase(loginPostAsync.rejected, (state, action) => {\r\n    state.loading = false;\r\n    state.isLogin = false;\r\n    state.user = null;\r\n    state.message = action.payload?.message || \"서버 오류\";\r\n    });\r\n},\r\n});\r\n\r\nexport const { logout } = loginSlice.actions;\r\nexport default loginSlice.reducer;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}